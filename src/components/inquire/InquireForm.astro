---
import '@fontsource/inter/latin-400.css';
import '@fontsource/inter/latin-500.css';
import { ViewTransitions } from 'astro:transitions';

// Ensure that Astro.url is used correctly to retrieve the query parameter
const productName = Astro.url?.searchParams.get('product') || 'Unknown Product';
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="mobile-icon" sizes="180x180" href="/Clocked_In_Logo.svg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/Clocked_In_Logo.svg" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="generator" content={Astro.generator} />
    <ViewTransitions />
  </head>
  <body class="bg-primary-50 text-primary-950 dark:bg-primary-950 dark:text-primary-200 antialiased transition">
    <main>
      <div class="py-16 sm:py-20 bg-white rounded-lg shadow-md">
        <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
          <div class="grid gap-12 lg:grid-cols-2 lg:gap-8">
            <div class="flex flex-col gap-4 sm:gap-6">
              <h2 class="text-3xl font-medium tracking-tight sm:text-4xl">Inquire about {productName}</h2>
              <p class="text-gray-600 max-w-lg text-lg sm:text-xl">
                We'll get back to you as soon as possible regarding {productName}.
              </p>
            </div>
            <form 
              action="https://formspree.io/f/xblrnekn"
              method="POST"
              class="mt-3 flex flex-col gap-y-6"
            >
              <!-- Displayed non-editable field for Product Name -->
              <div>
                <label for="product-display" class="text-gray-700">Product</label>
                <input
                  type="text"
                  id="product-display"
                  value={productName}
                  readonly
                  class="bg-gray-100 border border-gray-300 text-gray-700 block w-full appearance-none rounded-md px-4 py-4 focus:outline-none"
                />
              </div>

              <!-- Full name input -->
              <div>
                <label for="full-name" class="sr-only">Full name</label>
                <input
                  type="text"
                  name="full-name"
                  id="full-name"
                  autocomplete="name"
                  class="bg-white border border-gray-300 placeholder-gray-500 text-gray-700 block w-full appearance-none rounded-md px-4 py-4 focus:outline-none focus:ring-2 focus:ring-primary-600"
                  placeholder="Full name"
                  required
                />
              </div>

              <!-- Email input -->
              <div>
                <label for="email" class="sr-only">Email</label>
                <input
                  type="email"
                  name="email"
                  id="email"
                  autocomplete="email"
                  class="bg-white border border-gray-300 placeholder-gray-500 text-gray-700 block w-full appearance-none rounded-md px-4 py-4 focus:outline-none focus:ring-2 focus:ring-primary-600"
                  placeholder="Email"
                  required
                />
              </div>

              <!-- Questions  -->
              <div>
                <label for="questions" class="sr-only">Comment</label>
                <textarea
                  id="comment"
                  name="comment"
                  class="bg-white border border-gray-300 placeholder-gray-500 text-gray-700 block w-full appearance-none rounded-md px-4 py-4 focus:outline-none focus:ring-2 focus:ring-primary-600"
                  placeholder="Comment"
                  rows="4"
                  required
                ></textarea>
              </div>

              <!-- Phone input -->
              <div>
                <label for="phone" class="sr-only">Phone</label>
                <input
                  type="tel"
                  name="phone"
                  id="phone"
                  autocomplete="tel"
                  class="bg-white border border-gray-300 placeholder-gray-500 text-gray-700 block w-full appearance-none rounded-md px-4 py-4 focus:outline-none focus:ring-2 focus:ring-primary-600"
                  placeholder="Phone"
                />
              </div>

              <!-- Submit button -->
              <button
                class="bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-md px-5 py-3 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600"
                type="submit"
              >
                Send
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
